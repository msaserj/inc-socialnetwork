"use strict";(self.webpackChunksamurai_way=self.webpackChunksamurai_way||[]).push([[904],{1904:function(e,s,a){a.r(s),a.d(s,{DialogsContainer:function(){return T}});var i=a(8281),n=a(885),l=a(2791),t="Dialogs_dialogs__gQwrs",o="Dialogs_dialogWindow__mnf2+",r="Dialogs_messagesWindow__Xvse5",d="Dialogs_messages__r0PXH",c="DialogItem_dialogBlock__NRaDx",g="DialogItem_photoBlock__cWJpe",u="DialogItem_userPhoto__TpOKh",h=a(3504),m=a(1313),v=a(5796),x=a(184),_=l.memo((function(e){var s=e.dialogItem,a=s.id,n=s.photos,l=s.hasNewMessages,t=s.newMessagesCount,o=s.lastUserActivityDate,r=s.lastDialogActivityDate,d=(0,m.T)(),_="/profile/"+a;return(0,x.jsxs)("div",{className:c,children:[(0,x.jsxs)("div",{onClick:function(){d((0,i.AH)(a))},className:g,children:[(0,x.jsx)("img",{className:u,src:null!=n.small?n.small:v,alt:"avatar"}),(0,x.jsx)(h.OL,{to:_,children:"profile"})]}),(0,x.jsxs)("div",{children:[(0,x.jsxs)("div",{children:[" ",l?(0,x.jsxs)("span",{style:{color:"limegreen"},children:["Has New ",t," messages"]}):""]}),(0,x.jsxs)("div",{children:["Activity ",new Date(o).toLocaleString()]}),(0,x.jsxs)("div",{children:["Dialog ",new Date(r).toLocaleString()]})]})]})})),f="Messages_messageBlock__7FVWa",j=function(e){var s=e.message;return(0,x.jsxs)("div",{className:f,children:[(0,x.jsxs)("div",{style:{padding:"5px"},children:["data ",new Date(s.addedAt).toLocaleString()]}),(0,x.jsxs)("p",{style:{padding:"5px"},children:["message ",s.body]}),(0,x.jsxs)("div",{style:{padding:"5px"},children:["senderName ",s.senderName]}),(0,x.jsxs)("div",{style:{padding:"5px"},children:["viewed ",s.viewed]})]},s.id)},p=a(2811),w=a(6509),D="SendMessage_sendMessage__rjtdj",C="SendMessage_buttonBlock__8ndoV",N=function(e){var s=e.userId,a=(0,l.useState)(""),t=(0,n.Z)(a,2),o=t[0],r=t[1],d=(0,m.T)();console.log("SendMessageForm",s);return(0,x.jsxs)("div",{className:D,children:[(0,x.jsx)("div",{children:(0,x.jsx)(p.iF,{onChange:function(e){return r(e.currentTarget.value)},value:o})}),(0,x.jsx)("div",{className:C,children:(0,x.jsx)(w.z,{onClick:function(){o&&(d((0,i.CJ)(s,o)),r(""))},children:"Send"})})]})},y=l.memo((function(e){var s=(0,m.T)(),a=(0,m.C)((function(e){return e.dialogsPage.dialogs})),c=(0,m.C)((function(e){return e.dialogsPage.messages})),g=(0,m.C)((function(e){return e.dialogsPage.userId})),u=(0,l.useState)(!1),h=(0,n.Z)(u,2),v=h[0],f=h[1],p=(0,l.useRef)(null);return(0,l.useEffect)((function(){var e;v&&(null===(e=p.current)||void 0===e||e.scrollIntoView({behavior:"smooth"}))}),[c,v]),(0,l.useEffect)((function(){s((0,i.UP)())}),[s,g]),console.log("dialogs rendered"),(0,x.jsxs)("div",{className:t,children:[(0,x.jsx)("div",{style:{height:"650px",overflowY:"auto"},className:o,children:a&&a.map((function(e){return(0,x.jsx)(_,{dialogItem:e},e.id)}))}),(0,x.jsxs)("div",{className:r,children:[(0,x.jsxs)("div",{style:{height:"400px",overflowY:"auto"},className:d,onScroll:function(e){var s=e.currentTarget;s.scrollHeight-s.scrollTop===s.clientHeight?!v&&f(!0):v&&f(!1)},children:[c&&c.map((function(e){return(0,x.jsx)(j,{message:e},e.id)})),(0,x.jsx)("div",{ref:p})]}),(0,x.jsx)(N,{userId:g})]})]})})),k=a(2177),S=a(2163),T=(0,a(7781).qC)((0,k.$j)((function(e){return{dialogsPage:e.dialogsPage.dialogs,isAuth:e.auth.isAuth}}),{newTextMessageOnChange:i.Hw,sendMessageTC:i.CJ,getDialogsTC:i.UP}),S.e)(y)}}]);
//# sourceMappingURL=904.4d1734c9.chunk.js.map